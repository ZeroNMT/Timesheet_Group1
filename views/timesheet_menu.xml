<?xml version="1.0"?>
<odoo>
    <menuitem id = "timesheet_menu"
              name = "Jira's Timesheet"
              web_icon="timesheet_group1,static/description/icon.png"
                />


    <record
        model="ir.actions.act_window"
        id="action_timesheet_views">
        <field name="name">Jira's Timesheet</field>
        <field name="res_model">account.analytic.line</field>
        <field name="view_mode">grid</field>
        <field name="view_ids" eval="[(5, 0, 0),
            (0, 0, {'view_mode': 'grid', 'view_id' : ref('timesheet_line_grid')})]"/>
        <field name="context">{"search_default_filter_my_timesheet": 1}</field>

    </record>

    <menuitem id = "menu_timesheet_views"
              name = "Timesheet"
              action = "action_timesheet_views"
              parent = "timesheet_menu"
            />
    <record model="ir.rule" id="project_rule">
        <field name="name">Project Rule</field>
        <field name="model_id" ref="timesheet_group1.model_project_project"/>
        <field name="global" eval="True"/>
        <field name="domain_force">[('user_ids','child_of',[user.id])]</field>
    </record>

    <record model="ir.rule" id="task_rule">
        <field name="name">Task Rule</field>
        <field name="model_id" ref="timesheet_group1.model_project_task"/>
        <field name="global" eval="True"/>
        <field name="domain_force">[('project_id.user_ids','child_of',[user.id])]</field>
    </record>

    <record model="ir.rule" id="worklog_rule">
        <field name="name">Worklog Rule</field>
        <field name="model_id" ref="timesheet_group1.model_account_analytic_line"/>
        <field name="global" eval="True"/>
        <field name="domain_force">[('project_id.user_ids','child_of',[user.id])]</field>
    </record>
</odoo>